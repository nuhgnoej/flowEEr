# ðŸŒ¸ FlowEEr â€“ ì˜¨ë””ë°”ì´ìŠ¤ ì•± í”„ë¡œì íŠ¸ (MVP)

## ðŸ—ï¸ í”„ë¡œì íŠ¸ ê°œìš”

**FlowEErëŠ” íŒŒì›Œ ìœ ì €ë¥¼ ìœ„í•œ ë£¨í‹´ ì•Œë¦¼ ì•±ìž…ë‹ˆë‹¤.**

- í”Œë¡œìš°(Flow)ë¥¼ ì„¤ê³„í•˜ê³ , ìŠ¤í…(Step)ì„ ì—°ê²°í•˜ê³ , ì¡°ê±´(Trigger)ì— ë”°ë¼ ìžë™ìœ¼ë¡œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.
- ì„œë²„ ì—†ì´ **ì˜¨ë””ë°”ì´ìŠ¤(Local DB)** í™˜ê²½ì—ì„œ ìž‘ë™í•©ë‹ˆë‹¤.
- ë°˜ë³µë˜ëŠ” ì¼ìƒê³¼ ì—…ë¬´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

---

## ðŸš€ í•µì‹¬ ê°œë… ë° ìž‘ë™ ì›ë¦¬

| ìš”ì†Œ        | ì„¤ëª…                                                          |
| ----------- | ------------------------------------------------------------- |
| **Flow**    | í•˜ë‚˜ì˜ ìž‘ì—… íë¦„, ë£¨í‹´ ë‹¨ìœ„ (ì˜ˆ: ì•„ì¹¨ ì¤€ë¹„, ìš´ë™ ë£¨í‹´ ë“±)     |
| **Step**    | í”Œë¡œìš° ë‚´ ë‹¨ì¼ ìž‘ì—… ë˜ëŠ” ì•Œë¦¼ ë‹¨ìœ„ (ì˜ˆ: ê¸°ìƒ, ì–‘ì¹˜, ì¶œê·¼)     |
| **Trigger** | íŠ¹ì • ì‹œê°„ ë˜ëŠ” ë‹¤ë¥¸ Stepê³¼ì˜ ê´€ê³„ë¡œ Stepì„ ì‹¤í–‰í•˜ëŠ” ì¡°ê±´ ì„¤ì • |

- ê¸°ì¤€ ìŠ¤í…ì˜ **ì™„ë£Œ** ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ ì‹œê°„ ê³„ì‚° ê°€ëŠ¥
- íŠ¸ë¦¬ê±°ëŠ” **"ì‹œê°„ ê¸°ë°˜"** ë˜ëŠ” **"ìŠ¤í… ìƒíƒœ ê¸°ë°˜"**ìœ¼ë¡œ ìž‘ë™

---

## â° Trigger Type ì •ì˜ (ìµœì‹ )

| íŠ¸ë¦¬ê±°        | ì„¤ëª…                                              | ì£¼ìš” í•„ë“œ                        |
| ------------- | ------------------------------------------------- | -------------------------------- |
| **`at_time`** | íŠ¹ì • ì ˆëŒ€ ì‹œê°„ì— ì‹¤í–‰                             | `time` (ì˜ˆ: "07:00")             |
| **`delay`**   | íŠ¹ì • ìŠ¤í…(ë“¤)ì˜ **ì™„ë£Œ í›„ Nì´ˆ ë’¤ ì‹¤í–‰**           | `targetStepIds`(ë°°ì—´), `offset`  |
| **`after`**   | **í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ìŠ¤í… ì™„ë£Œ í›„ ì‹¤í–‰**         | `targetStepIds` (ë°°ì—´)           |
| **`end`**     | í”Œë¡œìš° ë‚´ **ëª¨ë“  ìŠ¤í… ì™„ë£Œ í›„ ì‹¤í–‰**              | ì—†ìŒ                             |

> âœ”ï¸ íŠ¸ë¦¬ê±° ë°°ì—´ ì¤‘ **í•˜ë‚˜ë¼ë„ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ í•´ë‹¹ ìŠ¤í…ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.**
> âœ”ï¸ delay/afterì˜ íƒ€ê²Ÿ ìŠ¤í…ì€ ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥í•˜ë©°, delayëŠ” ì˜¤í”„ì…‹(Â±)ë„ ì§€ì›í•©ë‹ˆë‹¤.

---

## ðŸ—‚ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (ìµœì‹ )

| í…Œì´ë¸”      | ì»¬ëŸ¼              | íƒ€ìž…      | ì œì•½ ì¡°ê±´                                          | ì„¤ëª…                                             |
| ----------- | ----------------- | --------- | -------------------------------------------------- | ------------------------------------------------ |
| **flow**    | `id`              | INTEGER   | PRIMARY KEY                                        | í”Œë¡œìš° ID                                        |
|             | `name`            | TEXT      | NOT NULL                                           | í”Œë¡œìš° ì´ë¦„                                      |
|             | `description`     | TEXT      |                                                    | í”Œë¡œìš° ì„¤ëª… (ì„ íƒ)                               |
| **step**    | `id`              | INTEGER   | PRIMARY KEY                                        | ìŠ¤í… ID                                          |
|             | `flow_id`         | INTEGER   | NOT NULL, FOREIGN KEY â†’ flow(id) ON DELETE CASCADE | ì†Œì† í”Œë¡œìš° ID                                   |
|             | `name`            | TEXT      | NOT NULL                                           | ìŠ¤í… ì´ë¦„                                        |
|             | `description`     | TEXT      |                                                    | ìŠ¤í… ì„¤ëª… (ì„ íƒ)                                 |
| **trigger** | `id`              | TEXT      | PRIMARY KEY                                        | íŠ¸ë¦¬ê±° ID (UUID/ìˆ«ìž)                            |
|             | `step_id`         | INTEGER   | NOT NULL, FOREIGN KEY â†’ step(id) ON DELETE CASCADE | ì—°ê²°ëœ ìŠ¤í… ID                                   |
|             | `type`            | TEXT      | NOT NULL                                           | íŠ¸ë¦¬ê±° íƒ€ìž… (`at_time`, `delay`, `after`, `end`) |
|             | `target_step_ids` | TEXT      | JSON ë°°ì—´ í˜•íƒœ                                     | íƒ€ê²Ÿ ìŠ¤í… ëª©ë¡                                   |
|             | `offset`          | INTEGER   |                                                    | ì˜¤í”„ì…‹(Â±ì´ˆ ë‹¨ìœ„, delayìš©)                        |
|             | `time`            | TEXT      |                                                    | at_timeìš© ì ˆëŒ€ ì‹œê°„ ("HH:mm")                    |

---

## âš™ï¸ Flow Engine & Scheduler

- `FlowEngine`ëŠ” ê° ìŠ¤í…ì˜ ìƒíƒœì™€ ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„ì„ ê³„ì‚°í•´ UIì— í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- `FlowScheduler`ëŠ” ì¤€ë¹„ëœ ìŠ¤í…ì„ ê¸°ë°˜ìœ¼ë¡œ Expo Notifications ì•Œë¦¼ì„ ì˜ˆì•½í•˜ë©°,
  ìŠ¤í… ì™„ë£Œ ì‹œ ë‹¤ìŒ ì•Œë¦¼ì„ ìžë™ìœ¼ë¡œ ì„¤ì •í•  ì˜ˆì •ìž…ë‹ˆë‹¤.

---
## ðŸŽ¯ ë™ìž‘ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

### ðŸ“„ ìˆœì°¨ì  ì‹¤í–‰

- **ê¸°ìƒ (07:00) â†’ ì–‘ì¹˜ (ì™„ë£Œ í›„ 2ë¶„ ë’¤) â†’ ì„¸ìˆ˜ (ì™„ë£Œ í›„ ì¦‰ì‹œ)**

| ìŠ¤í… | íŠ¸ë¦¬ê±°                      |
| ---- | --------------------------- |
| ê¸°ìƒ | at_time (07:00)             |
| ì–‘ì¹˜ | delay (ê¸°ìƒ ì™„ë£Œ í›„ +120ì´ˆ) |
| ì„¸ìˆ˜ | delay (ì–‘ì¹˜ ì™„ë£Œ í›„ +0ì´ˆ)   |

---

### ðŸ“„ ë³‘ë ¬ ì‹¤í–‰ + ë™ê¸°í™”

- **ì•„ì¹¨ ì¤€ë¹„ì™€ ì´ë©”ì¼ í™•ì¸ì„ ë™ì‹œì— ì‹œìž‘, ë‘ ìž‘ì—… ëª¨ë‘ ì™„ë£Œ í›„ ì¶œë°œ ì•Œë¦¼**

| ìŠ¤í…        | íŠ¸ë¦¬ê±°                                   |
| ----------- | ---------------------------------------- |
| ì•„ì¹¨ ì¤€ë¹„   | at_time (07:00)                          |
| ì´ë©”ì¼ í™•ì¸ | delay (ì•„ì¹¨ ì¤€ë¹„ ì™„ë£Œ í›„ +0ì´ˆ)           |
| ì¶œë°œ ì•Œë¦¼   | after (ì•„ì¹¨ ì¤€ë¹„ ì™„ë£Œ, ì´ë©”ì¼ í™•ì¸ ì™„ë£Œ) |

---

### ðŸ“„ í”Œë¡œìš° ì™„ë£Œ í›„ ì‹¤í–‰

- ëª¨ë“  ì¤€ë¹„ê°€ ì™„ë£Œëœ í›„ **"ì´ì œ ì¶œë°œí•˜ì„¸ìš”"** ì•Œë¦¼

| ìŠ¤í…      | íŠ¸ë¦¬ê±° |
| --------- | ------ |
| ì¶œë°œ ì•ˆë‚´ | end    |

---

## ðŸ”¥ ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­         | ì‚¬ìš© ê¸°ìˆ                                    |
| ------------ | ------------------------------------------- |
| í”„ë ˆìž„ì›Œí¬   | React Native + Expo                         |
| ìƒíƒœ ê´€ë¦¬    | React Context (Zustand ì˜ˆì •)                |
| ë°ì´í„°ë² ì´ìŠ¤ | SQLite (expo-sqlite, Async ê¸°ë°˜)            |
| UI ì»´í¬ë„ŒíŠ¸  | React Native + Custom Modal + Wheely Picker |
| ì•ŒëžŒ         | Expo Notifications (ê°œë°œ ì¤‘)                |

---

## âœ… í˜„ìž¬ ì§„í–‰ ìƒí™©

| ê¸°ëŠ¥                    | ìƒíƒœ                              |
| ----------------------- | --------------------------------- |
| í”Œë¡œìš° ìƒì„±/ìˆ˜ì •/ì‚­ì œ   | âœ… ì™„ë£Œ                           |
| ìŠ¤í… ì¶”ê°€/íŽ¸ì§‘/ì‚­ì œ     | âœ… ì™„ë£Œ                           |
| íŠ¸ë¦¬ê±° ì„¤ì • (ì‹œê°„/ìƒëŒ€) | âœ… ë¦¬íŒ©í† ë§ ì™„ë£Œ (ìƒˆ ëª¨ë¸ ì ìš©)   |
| ë¡œì»¬ ì €ìž¥ (SQLite)      | âœ… ì™„ë£Œ                           |
| ë¡œì»¬ ì•ŒëžŒ ì‹¤í–‰          | ðŸ”¥ ê°œë°œ ì¤‘ (expo-notifications)   |
| í”Œë¡œìš° ì‹¤í–‰ í™”ë©´        | âœ… ê¸°ë³¸ ì‹¤í–‰ ê¸°ëŠ¥ êµ¬í˜„            |
| í´ë¼ìš°ë“œ ì—°ë™           | âŒ ë¯¸ì§€ì› (MVPëŠ” ì˜¨ë””ë°”ì´ìŠ¤ ì „ìš©) |
| ì‚¬ìš©ìž ê³„ì •             | âŒ ë¯¸ì§€ì›                         |

---

## ðŸš€ ë‹¤ìŒ ë‹¨ê³„

- [ ] ë¡œì»¬ ì•Œë¦¼ ì™„ì „ ì—°ê²° ë° í…ŒìŠ¤íŠ¸
- [ ] ìŠ¤ì¼€ì¤„ëŸ¬ ë¡œì§ ê°œì„  ë° í…ŒìŠ¤íŠ¸
- [x] ì‹œê°„ ê³„ì‚° ì—”ì§„ ì„¤ê³„ ë° êµ¬í˜„
- [x] í”Œë¡œìš° ì‹¤í–‰ í™”ë©´ UI ë° ìƒíƒœ ê´€ë¦¬ ì„¤ê³„
- [ ] íŠ¸ë¦¬ê±° ì—ë””í„° UX ìµœì¢… ê°œì„  (ì˜¤í”„ì…‹ Â± ì§€ì› ë“±)
- [ ] ìŠ¤í… ìƒíƒœ ê´€ë¦¬ ê°œì„  (ì‹œìž‘/ì™„ë£Œ UI ì²˜ë¦¬)
- [ ] ì•Œë¦¼ â†’ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ â†’ ì™„ë£Œ ì²˜ë¦¬ íë¦„ ì™„ì„±
- [ ] ì•± ì•ˆì •í™” ë° MVP ë§ˆê°

---

## ðŸ’¡ ìŠ¬ë¡œê±´

> **"ì‹œê°„ì„ ì„¤ê³„í•˜ê³ , íë¦„ì„ ë§Œë“¤ê³ , ì‚¶ì„ í”¼ì›Œë‚¸ë‹¤." â€“ FlowEEr**

---

## ðŸ“œ ì‹¤í–‰ ë°©ë²•

```bash
npx expo start
```

- DB ì´ˆê¸°í™”ëŠ” ì•± êµ¬ë™ ì‹œ ìžë™ ìˆ˜í–‰ë¨
- ë˜ëŠ” ìˆ˜ë™ ì‹¤í–‰

```ts
import { initDatabase } from "@/lib/db";
initDatabase();
```

---

> Â© 2025 flowEEr. All rights reserved.
